@using ITS.CPER.WebPage.Areas.Identity.Pages.Account;
@inject IDialogService DialogService

<AuthorizeView>
    <Authorized>
        <MudMenu AnchorOrigin="Origin.BottomRight" ActivationEvent="@MouseEvent.MouseOver" FullWidth>
            <ActivatorContent>
                @*<MudAvatar Image="images/toiletvisit.jpg" />*@
                <MudButton Variant="Variant.Outlined" Style="@($"color:{Colors.LightGreen.Accent4};")">
                    <MudIcon Icon="@Icons.Material.Filled.Person" Title="Account" Style="padding-right:5px; font-size:x-large;" />
                    <MudText>Hello, @context.User.Identity?.Name!</MudText>
                </MudButton>
            </ActivatorContent>
            <ChildContent>
                <MudMenuItem>
                    <MudIconButton Icon="@Icons.Material.Filled.Person" Href="Identity/Account/Manage" Size="Size.Small" /> Profile
                </MudMenuItem>
                <MudDivider DividerType="DividerType.Middle" />
                <MudMenuItem @onclick="OpenDialog" Class="align-items-center">
                    <MudIconButton Icon="@Icons.Material.Outlined.Logout" Size="Size.Small" @onclick="OpenDialog" /> Log out
                </MudMenuItem>
            </ChildContent>
        </MudMenu>
    </Authorized>
    <NotAuthorized>
        <MudButton Variant="Variant.Outlined" href="Identity/Account/Login" Style="@($"color:{Colors.LightGreen.Accent4};")">
            <MudIcon Icon="@Icons.Material.Filled.Person" Title="Account" Style="padding-right:5px; font-size:x-large;"/> 
            <MudText>Login</MudText>
        </MudButton>
    </NotAuthorized>
</AuthorizeView>

@code {

    private void OpenDialog()
    {
        var options = new DialogOptions { CloseOnEscapeKey = true };
        DialogService.Show<Dialog>("Confirm", options);
    }
}